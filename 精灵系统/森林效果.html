<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>threejs</title>
  <style type="text/css">
    body{
      margin: 0;
      overflow: hidden;
    }
  </style>
  <script src="http://www.yanhuangxueyuan.com/threejs/build/three.js"></script>
  <script src="http://www.yanhuangxueyuan.com/threejs/examples/js/controls/OrbitControls.js"></script>
</head>
<body>
  <script>
    //初始化环境
    var scene = new THREE.Scene()
    
    var endTree
    var textureTree = new THREE.TextureLoader().load('tree.png')
    // 批量创建表示一个树的精灵模型
    for(let i=0;i<100;i++){
      var spriteMaterial = new THREE.SpriteMaterial({
        map : textureTree
      })
    
      // 创建精灵模型
      var sprite = new THREE.Sprite(spriteMaterial)
      scene.add(sprite)
      endTree = sprite
       // 控制精灵大小,
      sprite.scale.set(10, 10, 1)
      var k1 = Math.random() - 0.5;
      var k2 = Math.random() - 0.5;
      // 设置精灵模型位置，在xoz平面上随机分布
      sprite.position.set(100 * k1, 5, 100 * k2)
    }
    // 创建草地
    var plane = new THREE.PlaneGeometry(120,120)
    var textureGrass = new THREE.TextureLoader().load('grass.jpg')
    //设置纹理重复
    textureGrass.wrapS = THREE.RepeatWrapping
    textureGrass.wrapT = THREE.RepeatWrapping
    textureGrass.repeat.set(10,10)
    var material = new THREE.MeshLambertMaterial({
      map : textureGrass,
      side: THREE.DoubleSide,
    })
    var mesh = new THREE.Mesh(plane,material)
    scene.add(mesh)
    mesh.rotateX(-Math.PI / 2)
      
    //环境光
    var ambient = new THREE.AmbientLight(0x999999);
    scene.add(ambient);
    var light = new THREE.DirectionalLight(0xffffff,1)
    light.position.set(15,15,15)
    scene.add(light)
    
    //设置相机
    var width = window.innerWidth; 
    var height = window.innerHeight; 
    var k = width / height; //窗口宽高比
    // var s = 700; //三维场景显示范围控制系数，系数越大，显示的范围越大
    
    var camera = new THREE.PerspectiveCamera(45, width / height,0.1,1500);
    
    //设置相机位置
    camera.position.set(0,10,0);
    //设置相机方向
    console.log(camera)
    //渲染对象
    var renderer = new THREE.WebGLRenderer();
    renderer.setSize(width, height);//设置渲染区域尺寸
    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色
    document.body.appendChild(renderer.domElement); //body元素中插入canvas对象
    
    var AxesHelper = new THREE.AxesHelper(1000);
    scene.add(AxesHelper);
    
    var angle = 0
    function render(){
      renderer.render(scene, camera);
      requestAnimationFrame(render)
      // angle -= 0.005
      // camera.position.x = 500 * Math.cos(angle)
      // camera.position.z = 500 * Math.sin(angle)
      // camera.lookAt(0,0,0);
      // if(angle <= -360)
      //   angle = 0
    }
    render()
    var controls = new THREE.OrbitControls(camera,renderer.domElement);//创建控件对象
  
  </script>
</body>
</html>
