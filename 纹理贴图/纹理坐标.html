<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>threejs</title>
  <style type="text/css">
    body{
      margin: 0;
      overflow: hidden;
    }
  </style>
  <script src="http://www.yanhuangxueyuan.com/threejs/build/three.js"></script>
  <script src="http://www.yanhuangxueyuan.com/threejs/examples/js/controls/OrbitControls.js"></script>
</head>
<body>
  <script>
    //初始化环境
    var scene = new THREE.Scene()
    
    //创建一个映射平面
   // var geometry = new THREE.PlaneGeometry(204, 102, 4, 4);
   // var t0 = new THREE.Vector2(0, 1); //图片左下角
   // var t1 = new THREE.Vector2(0, 0); //图片右下角
   // var t2 = new THREE.Vector2(1, 0); //图片右上角
   // var t3 = new THREE.Vector2(1, 1); //图片左上角
   // var uv1 = [t0, t1, t3]; //选中图片一个三角区域像素——用于映射到一个三角面
   // var uv2 = [t1, t2, t3]; //选中图片一个三角区域像素——用于映射到一个三角面
   // geometry.faceVertexUvs[0][6] = uv1
   // geometry.faceVertexUvs[0][7] = uv2
   
   var geometry = new THREE.Geometry(); //创建一个空几何体对象
   /**顶点坐标(纹理映射位置)*/
   var p1 = new THREE.Vector3(0,0,0); //顶点1坐标
   var p2 = new THREE.Vector3(160,0,0); //顶点2坐标
   var p3 = new THREE.Vector3(160,80,0); //顶点3坐标
   var p4 = new THREE.Vector3(0,80,0); //顶点4坐标
   geometry.vertices.push(p1,p2,p3,p4); //顶点坐标添加到geometry对象
   /** 三角面1、三角面2*/
   var normal = new THREE.Vector3( 0, 0, 1 ); //三角面法向量
   var face0 = new THREE.Face3( 0, 1, 2, normal); //三角面1
   var face1 = new THREE.Face3( 0, 2, 3, normal); //三角面2
   geometry.faces.push( face0,face1 ); //三角面1、2添加到几何体
   
   var t0 = new THREE.Vector2(0,0);//图片左下角
   var t1 = new THREE.Vector2(1,0);//图片右下角
   var t2 = new THREE.Vector2(1,1);//图片右上角
   var t3 = new THREE.Vector2(0,1);//图片左上角
   uv1 = [t0,t1,t2];//选中图片一个三角区域像素——映射到三角面1
   uv2 = [t0,t2,t3];//选中图片一个三角区域像素——映射到三角面2
   //纹理坐标传递给纹理三角面属性
   geometry.faceVertexUvs[0][0] = uv1
   
   
    //创建一个纹理加载器
    var imgLoader = new THREE.ImageLoader()
    //执行load方法
    imgLoader.load('img3.jpg',(img) => {
      var texture = new THREE.Texture(img)
      texture.needsUpdate = true;
      var material = new THREE.MeshLambertMaterial({
        map : texture,
        // wireframe:true
      })
      var mesh = new THREE.Mesh(geometry,material)
      scene.add(mesh)
    })
    
    //环境光
    var ambient = new THREE.AmbientLight(0x444444);
    scene.add(ambient);
    
    //点光源
    var point = new THREE.PointLight(0xffffff,1)
    point.position.set(150,80,150)
    scene.add(point)
    
    var point2 = new THREE.PointLight(0xffffff,1)
    point2.position.set(-150,80,-150)
    scene.add(point2)
    
    //设置相机
    var width = window.innerWidth; 
    var height = window.innerHeight; 
    var k = width / height; //窗口宽高比
    var s = 200; //三维场景显示范围控制系数，系数越大，显示的范围越大
    var camera = new THREE.OrthographicCamera(-s * k, s * k, s, -s, 1, 1000);
    camera.position.set(200, 300, 200); //设置相机位置
    camera.lookAt(scene.position); //设置相机方向(指向的场景对象)
    //渲染对象
    var renderer = new THREE.WebGLRenderer();
    renderer.setSize(width, height);//设置渲染区域尺寸
    renderer.setClearColor(0xb9d3ff, 1); //设置背景颜色
    document.body.appendChild(renderer.domElement); //body元素中插入canvas对象
    
    //辅助坐标系
    var AxesHelper= new THREE.AxesHelper(1000);
    scene.add(AxesHelper);
    
    function render(){
      renderer.render(scene, camera);
      requestAnimationFrame(render)
    }
    render()
    var controls = new THREE.OrbitControls(camera,renderer.domElement);//创建控件对象
  </script>
</body>
</html>
