<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>圆形碰撞反弹</title>
	</head>
	<style type="text/css">
		body{
			margin: 0;
		}
		canvas{
			border: 1px solid red;
		}
	</style>
	<body>
		<canvas id="canvas" width="800" height="600">
			请升级浏览器
		</canvas>
		
		<script type="text/javascript">
			let canvas = document.getElementById('canvas')
			if(canvas.getContext){
				let ctx = canvas.getContext('2d')
				/* 
						canvas动画原理
						1 绘制图像
						2 清除图像
						3 更新位置
						4 绘制图像
				 */
				function Ball(x,y,r,sppdX,sppdY,color){
					//设置属性
					this.x = x
					this.y = y
					this.r = r
					this.sppdX = sppdX
					this.sppdY = sppdY
					this.color = color
					
					//设置方法
					this.draw = () => {
						ctx.beginPath()
						ctx.fillStyle = this.color
						ctx.arc(this.x,this.y,this.r,0,Math.PI*2)
						ctx.fill()
					}
					
					//移动
					this.move = () => {
						this.x += this.sppdX
						if(this.x > canvas.width-this.r || this.x < this.r)
							this.sppdX *= -1
						this.y += this.sppdY
						if(this.y > canvas.height-this.r || this.y < this.r)
							this.sppdY *= -1
					}
				}
				var ball = new Ball(100,100,20,2,2,'blue')
				start()
				function start(){
					ctx.clearRect(0,0,canvas.width,canvas.height)
					ball.draw()
					ball.move()
					window.requestAnimationFrame(start)
				}
			}
		</script>
	</body>
</html>
