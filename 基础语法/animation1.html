<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>直行运动</title>
	</head>
	<style type="text/css">
		body{
			margin: 0;
		}
		canvas{
			border: 1px solid red;
		}
	</style>
	<body>
		<canvas id="canvas" width="800" height="600">
			请升级浏览器
		</canvas>
		
		<script type="text/javascript">
			let canvas = document.getElementById('canvas')
			if(canvas.getContext){
				let ctx = canvas.getContext('2d')
				//直线运动
				
				ctx.beginPath()
				/* 
						canvas动画原理
						1 绘制图像
						2 清除图像
						3 更新位置
						4 绘制图像
				 */
				
				let x=0,y=0,width=100,height=100
				ctx.fillStyle = "red"
				ctx.fillRect(x,y,width,height)
				
				let speedX = 2
				let speedY = 2
				/* 方法1 自定义事件 */
				/*let move = setInterval(() => {
					//清空画布
					ctx.clearRect(0,0,canvas.width,canvas.height)
					//更新位置
					x += speedX
					//判断是否超出范围
					if(x > canvas.width - width || x < 0)
						speedX *= -1
					y += speedY
					if(y > canvas.height - height || y < 0)
						speedY *= -1
					//重新绘制
					ctx.fillRect(x,y,width,height)
				},5)*/
				
				/* 方法2 关键帧方法*/
				move()
				function move(){
					//清空画布
					ctx.clearRect(0,0,canvas.width,canvas.height)
					//更新位置
					x += speedX
					//判断是否超出范围
					if(x > canvas.width - width || x < 0)
						speedX *= -1
					y += speedY
					if(y > canvas.height - height || y < 0)
						speedY *= -1
					//重新绘制
					ctx.fillRect(x,y,width,height)
					window.requestAnimationFrame(move)
				}
			}
		</script>
	</body>
</html>
